---
import Layout from '../layouts/Layout.astro';
---

<Layout title="New Life Juice - Admin Dashboard">
    <div class="min-h-screen bg-gray-50">
        <!-- Admin Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-900">Admin Dashboard</h1>
                        <span class="ml-3 px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full">
                            New Life Juice
                        </span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="aiAssistantBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            ü§ñ AI Assistant
                        </button>
                        <a href="/" class="text-gray-600 hover:text-gray-900">
                            üëÄ View Site
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column: Quick Stats & AI Tools -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Quick Stats -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">Quick Stats</h2>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Active Products</span>
                                <span class="font-semibold text-green-600" id="activeProductCount">5</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Total Orders</span>
                                <span class="font-semibold text-blue-600">47</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Revenue</span>
                                <span class="font-semibold text-purple-600">$846</span>
                            </div>
                        </div>
                    </div>

                    <!-- AI Content Generator -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">ü§ñ AI Content Generator</h2>
                        <div class="space-y-4">
                            <select id="aiContentType" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="product-description">Product Description</option>
                                <option value="hero-content">Hero Section</option>
                                <option value="marketing-copy">Marketing Copy</option>
                                <option value="blog-post">Blog Post</option>
                            </select>
                            <textarea 
                                id="aiPrompt" 
                                placeholder="Describe what you want to create..."
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-24 resize-none"
                            ></textarea>
                            <button id="generateAIContent" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                Generate Content
                            </button>
                        </div>
                    </div>

                    <!-- Image Management -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">üì∏ Image Management</h2>
                        <div class="space-y-4">
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <input type="file" id="imageUpload" accept="image/*" class="hidden" multiple>
                                <button onclick="document.getElementById('imageUpload').click()" class="text-blue-600 hover:text-blue-700">
                                    üìÅ Upload Images
                                </button>
                                <p class="text-sm text-gray-500 mt-2">Or drag and drop files here</p>
                            </div>
                            <div id="imageGallery" class="grid grid-cols-2 gap-2">
                                <!-- Images will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Content Management -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Product Management -->
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <div class="flex justify-between items-center">
                                <h2 class="text-lg font-semibold text-gray-900">Product Management</h2>
                                <button id="addProductBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                    + Add Product
                                </button>
                            </div>
                        </div>
                        <div class="p-6">
                            <div id="productsList" class="space-y-4">
                                <!-- Products will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Site Content Editor -->
                    <div class="bg-white rounded-xl shadow-sm">
                        <div class="p-6 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900">Site Content Editor</h2>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Hero Section -->
                                <div class="space-y-4">
                                    <h3 class="font-medium text-gray-900">Hero Section</h3>
                                    <input 
                                        type="text" 
                                        id="heroTitle" 
                                        placeholder="Hero Title"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                    <textarea 
                                        id="heroDescription" 
                                        placeholder="Hero Description"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 h-24"
                                    ></textarea>
                                </div>

                                <!-- Business Info -->
                                <div class="space-y-4">
                                    <h3 class="font-medium text-gray-900">Business Info</h3>
                                    <input 
                                        type="text" 
                                        id="businessName" 
                                        placeholder="Business Name"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                    <input 
                                        type="text" 
                                        id="businessPhone" 
                                        placeholder="Phone Number"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                    <input 
                                        type="email" 
                                        id="businessEmail" 
                                        placeholder="Email Address"
                                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                    >
                                </div>
                            </div>
                            
                            <div class="mt-6 flex justify-end space-x-4">
                                <button id="previewChanges" class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    Preview Changes
                                </button>
                                <button id="saveChanges" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- AI Assistant Modal -->
        <div id="aiModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold">ü§ñ AI Assistant</h3>
                        <button id="closeAIModal" class="text-gray-400 hover:text-gray-600">
                            ‚úï
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div id="aiChatHistory" class="space-y-4 mb-4 max-h-64 overflow-y-auto">
                        <!-- Chat history will appear here -->
                    </div>
                    <div class="flex space-x-2">
                        <input 
                            type="text" 
                            id="aiChatInput" 
                            placeholder="Ask AI to help with your business..."
                            class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                        >
                        <button id="sendAIMessage" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Modal -->
        <div id="productModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-xl max-w-lg w-full">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold" id="productModalTitle">Add Product</h3>
                        <button id="closeProductModal" class="text-gray-400 hover:text-gray-600">
                            ‚úï
                        </button>
                    </div>
                </div>
                <form id="productForm" class="p-6 space-y-4">
                    <input type="hidden" id="productId">
                    <input 
                        type="text" 
                        id="productName" 
                        placeholder="Product Name"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                        required
                    >
                    <textarea 
                        id="productDescription" 
                        placeholder="Product Description"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 h-24"
                        required
                    ></textarea>
                    <input 
                        type="number" 
                        id="productPrice" 
                        placeholder="Price"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                        step="0.01"
                        required
                    >
                    <div class="flex justify-end space-x-4">
                        <button type="button" id="cancelProduct" class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                        <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            Save Product
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script is:inline src="/js/admin-dashboard.js"></script>
</Layout>
